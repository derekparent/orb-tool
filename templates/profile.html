{% extends "base.html" %}

{% block title %}Profile - Engine Room Status{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">User Profile</h1>
</div>

<div class="card">
    <div class="card-header">
        <h3 class="card-title">Account Information</h3>
    </div>
    <div class="card-content">
        <div class="profile-info">
            <div class="info-row">
                <span class="info-label">Username:</span>
                <span class="info-value">{{ user.username }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Full Name:</span>
                <span class="info-value">{{ user.full_name or 'Not set' }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Email:</span>
                <span class="info-value">{{ user.email or 'Not set' }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Role:</span>
                <span class="info-value role-badge role-{{ user.role.value }}">
                    {% if user.role.value == 'chief_engineer' %}
                        Chief Engineer
                    {% elif user.role.value == 'engineer' %}
                        Engineer
                    {% else %}
                        Viewer
                    {% endif %}
                </span>
            </div>
            <div class="info-row">
                <span class="info-label">Last Login:</span>
                <span class="info-value">
                    {% if user.last_login %}
                        {{ user.last_login.strftime('%Y-%m-%d %H:%M UTC') }}
                    {% else %}
                        Never
                    {% endif %}
                </span>
            </div>
        </div>

        <div class="profile-actions">
            <a href="/auth/logout" class="btn btn-secondary">Logout</a>
            {% if user.can_access_route('admin') %}
                <a href="/auth/admin/users" class="btn btn-primary">Manage Users</a>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

{% block head %}
{{ super() }}
<style>
.profile-info {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 2rem;
}

.info-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 0;
    border-bottom: 1px solid var(--border);
}

.info-row:last-child {
    border-bottom: none;
}

.info-label {
    font-weight: 500;
    color: var(--text-secondary);
}

.info-value {
    font-weight: 500;
    color: var(--text-primary);
}

.role-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.role-chief_engineer {
    background: rgba(220, 38, 127, 0.1);
    color: #dc267f;
}

.role-engineer {
    background: rgba(0, 123, 255, 0.1);
    color: #007bff;
}

.role-viewer {
    background: rgba(108, 117, 125, 0.1);
    color: #6c757d;
}

.profile-actions {
    display: flex;
    gap: 1rem;
    justify-content: flex-end;
}

@media (max-width: 480px) {
    .info-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.25rem;
    }

    .profile-actions {
        flex-direction: column;
        width: 100%;
    }

    .btn {
        width: 100%;
        text-align: center;
    }
}
</style>
{% endblock %}